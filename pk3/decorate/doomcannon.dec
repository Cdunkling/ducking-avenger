ACTOR "Doom Cannon" : Weapon
{
    Weapon.SelectionOrder 2000
	Inventory.PickupMessage "Got the Doom Cannon!"
	Obituary "%k doomed %o."
    Weapon.AmmoType ""
    Weapon.AmmoUse 0
    Weapon.AmmoType2 "MissileAmmo"
    Weapon.SlotNumber 9
    Weapon.AmmoUse2 1
	+AMMO_OPTIONAL
    +ALT_AMMO_OPTIONAL
    +NOAUTOFIRE
    +NOALERT
    +CHEATNOTWEAPON
    Decal BulletChip
	States
	{
    Spawn:
	    MEGA B -1
        Stop
	Ready:
		DCAN AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 1 A_WeaponReady
		TNT1 A 0 A_PlaySoundEx("dcann/hbeat","soundslot7",0,0)
		DCAN RSTUVW 1 A_WeaponReady
        XBEM AAAA 1 A_WeaponReady
        DCAN WVUTSR 1 A_WeaponReady
		Loop
	Select:
        TNT1 A 0
		TNT1 A 0 A_PlaySoundEx("dcann/up","soundslot7",0,0)
    Select2:
        TNT1 AAAAAAAAAAAAAAAAAAAA 0 A_Raise
        DCAN A 1 A_Raise
        loop
	Deselect:
        TNT1 A 0 A_PlaySoundEx("silence","soundslot5")
        DCAN RSTUVW 1 A_WeaponReady(WRF_NOFIRE | WRF_NOSWITCH)
        XBEM A 5 A_WeaponReady(WRF_NOFIRE | WRF_NOSWITCH)
        TNT1 AAAAAAAAAAAAAAAAAAAA 0 A_Lower
        XBEM A 0 A_Lower
        loop
	Fire:
		TNT1 A 0 A_PlayWeaponSound("dcann/fire")
        DCAN A 1 A_WeaponReady(WRF_NOSECONDARY|WRF_NOPRIMARY|WRF_NOSWITCH)
	    TNT1 A 0 A_Recoil(1)
        TNT1 A 0 A_FireBullets(5.6,0.25,7,5,"DoomBulletPuff",0)
	    TNT1 A 0 Radius_Quake(1,8,0,1,0)
        TNT1 A 0 A_SetPitch(pitch-random(100,250)/100.00)
        TNT1 A 0 A_SetAngle(angle-random(-150,150)/100.00)
		TNT1 A 0 A_AlertMonsters
        TNT1 A 0 A_Light2
		DCAN C 1 BRIGHT A_WeaponReady(WRF_NOSECONDARY|WRF_NOPRIMARY|WRF_NOSWITCH)
        TNT1 A 0 A_Light1
		DCAN D 1 BRIGHT A_WeaponReady(WRF_NOSECONDARY|WRF_NOPRIMARY|WRF_NOSWITCH)
		TNT1 A 0 A_Light0
		DCAN E 1 A_WeaponReady(WRF_NOSECONDARY|WRF_NOPRIMARY|WRF_NOSWITCH)
		DCAN EEFFFEEGHA 1 A_WeaponReady(WRF_NOSECONDARY|WRF_NOPRIMARY|WRF_NOSWITCH)
        DCAN A 4 A_WeaponReady(WRF_NOSECONDARY|WRF_NOPRIMARY|WRF_NOSWITCH)
		TNT1 A 0 A_PlaySoundEx("dcann/cock","soundslot5",0,0)
        DCAN A 4 A_WeaponReady(WRF_NOSECONDARY|WRF_NOPRIMARY|WRF_NOSWITCH)
        DCAN A 8 A_WeaponReady(WRF_NOSWITCH)
        TNT1 A 0 A_Refire
		Goto Ready
    Hold:
        TNT1 A 0 A_JumpIfInventory("PowerBeamCharged",1,"HoldFinal2")
        TNT1 A 0 A_JumpIfInventory("PowerBeamChargeLevel",13,"HoldFinal")
        TNT1 A 0 A_JumpIfInventory("PowerBeamChargeLevel",11,"Hold7")
        TNT1 A 0 A_JumpIfInventory("PowerBeamChargeLevel",9,"Hold6")
        TNT1 A 0 A_JumpIfInventory("PowerBeamChargeLevel",7,"Hold5")
        TNT1 A 0 A_JumpIfInventory("PowerBeamChargeLevel",5,"Hold4")
        TNT1 A 0 A_JumpIfInventory("PowerBeamChargeLevel",3,"Hold3")
        TNT1 A 0 A_JumpIfInventory("PowerBeamChargeLevel",1,"Hold2")
        TNT1 A 0 A_PlaySoundEx("dcann/cock2","soundslot5")
    Hold2:
        TNT1 A 0
        TNT1 A 0 A_JumpIfInventory("PowerBeamChargeLevel",31,"HoldFinal")
        TNT1 A 0 A_GiveInventory("PowerBeamChargeLevel",1)
		DCAN KK 1 //A_FireCustomMissile("LongBeamChargingSpawner1",0,0,0,0,0,0)//A_SpawnItemEx("LongBeamCharging1",-15,64,28,0,0,0,-270,32) 
        TNT1 A 0 A_Refire
    HoldFire:
        TNT1 A 0
        TNT1 A 0 A_PlaySoundEx("silence","soundslot5")
        TNT1 A 0 A_TakeInventory("PowerBeamChargeLevel",34)
        TNT1 A 0 A_ClearRefire
		TNT1 A 0 A_PlayWeaponSound("dcann/fire")
        DCAN A 1 A_WeaponReady(WRF_NOSECONDARY|WRF_NOPRIMARY|WRF_NOSWITCH)
	    TNT1 A 0 A_Recoil(1)
        TNT1 A 0 A_FireBullets(5.6,0.25,7,6,"DoomBulletPuff",0)
	    TNT1 A 0 Radius_Quake(1,8,0,1,0)
        TNT1 A 0 A_SetPitch(pitch-random(100,250)/100.00)
        TNT1 A 0 A_SetAngle(angle-random(-150,150)/100.00)
		TNT1 A 0 A_AlertMonsters
        TNT1 A 0 A_Light2
		DCAN C 1 BRIGHT A_WeaponReady(WRF_NOSECONDARY|WRF_NOPRIMARY|WRF_NOSWITCH)
        TNT1 A 0 A_Light1
		DCAN D 1 BRIGHT A_WeaponReady(WRF_NOSECONDARY|WRF_NOPRIMARY|WRF_NOSWITCH)
		TNT1 A 0 A_Light0
		DCAN E 1 A_WeaponReady(WRF_NOSECONDARY|WRF_NOPRIMARY|WRF_NOSWITCH)
		DCAN EEFFFEEGHA 1 A_WeaponReady(WRF_NOSECONDARY|WRF_NOPRIMARY|WRF_NOSWITCH)
        DCAN A 4 A_WeaponReady(WRF_NOSECONDARY|WRF_NOPRIMARY|WRF_NOSWITCH)
		TNT1 A 0 A_PlaySoundEx("dcann/cock","soundslot5",0,0)
        DCAN A 4 A_WeaponReady(WRF_NOSECONDARY|WRF_NOPRIMARY|WRF_NOSWITCH)
        DCAN A 8 A_WeaponReady(WRF_NOSWITCH)
		Goto Ready
    Hold3:
        TNT1 A 0
        TNT1 A 0 A_JumpIfInventory("PowerBeamChargeLevel",31,"HoldFinal")
        TNT1 A 0 A_GiveInventory("PowerBeamChargeLevel",1)
		DCAN LL 1 //A_FireCustomMissile("LongBeamChargingSpawner2",0,0,0,0,0,0)//A_SpawnItemEx("LongBeamCharging2",-15,64,28,0,0,0,-270,32) 
        TNT1 A 0 A_Refire
        goto HoldFire
    Hold4:
        TNT1 A 0
        TNT1 A 0 A_JumpIfInventory("PowerBeamChargeLevel",31,"HoldFinal")
        TNT1 A 0 A_GiveInventory("PowerBeamChargeLevel",1)
		DCAN MM 1 //A_FireCustomMissile("LongBeamChargingSpawner3",0,0,0,0,0,0)//A_SpawnItemEx("LongBeamCharging3",-15,64,28,0,0,0,-270,32) 
        TNT1 A 0 A_Refire
        goto HoldFire
    Hold5:
        TNT1 A 0
        TNT1 A 0 A_JumpIfInventory("PowerBeamChargeLevel",31,"HoldFinal")
        TNT1 A 0 A_GiveInventory("PowerBeamChargeLevel",1)
		DCAN NN 1 //A_FireCustomMissile("LongBeamChargingSpawner4",0,0,0,0,0,0)//A_SpawnItemEx("LongBeamCharging4",-15,64,28,0,0,0,-270,32) 
        TNT1 A 0 A_Refire
        goto HoldFire
    Hold6:
        TNT1 A 0
        TNT1 A 0 A_JumpIfInventory("PowerBeamChargeLevel",31,"HoldFinal")
        TNT1 A 0 A_GiveInventory("PowerBeamChargeLevel",1)
		DCAN OO 1 //A_FireCustomMissile("LongBeamChargingSpawner5",0,0,0,0,0,0)//A_SpawnItemEx("LongBeamCharging5",-15,64,28,0,0,0,-270,32) 
        TNT1 A 0 A_Refire
        goto HoldFire
    Hold7:
        TNT1 A 0
        TNT1 A 0 A_JumpIfInventory("PowerBeamChargeLevel",31,"HoldFinal")
        TNT1 A 0 A_GiveInventory("PowerBeamChargeLevel",1)
		DCAN PP 1 //A_FireCustomMissile("LongBeamChargingSpawner6",0,0,0,0,0,0)//A_SpawnItemEx("LongBeamCharging6",-15,64,28,0,0,0,-270,32) 
        TNT1 A 0 A_Refire
        goto HoldFire
    HoldFinal:
        TNT1 A 0
        TNT1 A 0 A_GiveInventory("PowerBeamCharged",1)
        TNT1 A 0 A_PlaySoundEx("dcann/cock3","soundslot7")
    HoldFinal2:
        TNT1 A 0
        //TNT1 A 0 A_JumpIfInventory("PowerBeamIdle",26,"HoldFinal3")
        TNT1 A 0 A_GiveInventory("PowerBeamIdle",1)
		DCAN QQ 1 //A_FireCustomMissile("LongBeamChargingSpawner7",0,0,0,0,0,0)//A_SpawnItemEx("LongBeamCharging7",-15,64,28,0,0,0,-270,32) 
        TNT1 A 0 A_Refire
        TNT1 A 0 A_PlaySoundEx("silence","soundslot7")//A_StopSoundEx("soundslot7")
		TNT1 A 0 A_PlayWeaponSound("dcann/chfire")
        TNT1 A 0 A_TakeInventory("PowerBeamCharged",1)
        TNT1 A 0 A_TakeInventory("PowerBeamChargeLevel",34)
        TNT1 A 0 A_TakeInventory("PowerBeamIdle",34)
        TNT1 A 0 A_ClearRefire
		TNT1 A 0 A_PlayWeaponSound("dcann/chfire")
        DCAN A 1 A_WeaponReady(WRF_NOSECONDARY|WRF_NOPRIMARY|WRF_NOSWITCH)
	    TNT1 A 0 A_Recoil(3)
        TNT1 A 0 A_FireBullets(11.2,7.1,20,6,"DoomBulletPuff",0)
	    TNT1 A 0 Radius_Quake(2,8,0,1,0)
        TNT1 A 0 A_SetPitch(pitch-random(100,400)/100.00)
        TNT1 A 0 A_SetAngle(angle-random(-200,200)/100.00)
		TNT1 A 0 A_AlertMonsters
        TNT1 A 0 A_Light2
		DCAN B 1 BRIGHT A_WeaponReady(WRF_NOSECONDARY|WRF_NOPRIMARY|WRF_NOSWITCH)
        TNT1 A 0 A_Light1
		DCAN C 1 BRIGHT A_WeaponReady(WRF_NOSECONDARY|WRF_NOPRIMARY|WRF_NOSWITCH)
		TNT1 A 0 A_Light0
		DCAN D 1 BRIGHT A_WeaponReady(WRF_NOSECONDARY|WRF_NOPRIMARY|WRF_NOSWITCH)
		DCAN EEFFFEEGHA 1 A_WeaponReady(WRF_NOSECONDARY|WRF_NOPRIMARY|WRF_NOSWITCH)
        DCAN A 5 A_WeaponReady(WRF_NOSECONDARY|WRF_NOPRIMARY|WRF_NOSWITCH)
		TNT1 A 0 A_PlaySoundEx("dcann/cock3","soundslot5",0,0)
        DCAN A 5 A_WeaponReady(WRF_NOSECONDARY|WRF_NOPRIMARY|WRF_NOSWITCH)
        DCAN A 10 A_WeaponReady(WRF_NOSWITCH)
        goto Ready

    AltFire:
        TNT1 A 0 A_JumpIfNoAmmo("Ready")
		TNT1 A 0 A_PlayWeaponSound("missile/fire")
	    TNT1 A 0 A_Recoil(2)
	    TNT1 A 0 A_ZoomFactor(0.95,ZOOM_INSTANT)
	    TNT1 A 0 Radius_Quake(1,8,0,1,0)
		TNT1 A 0 A_FireCustomMissile("PowerMissile",0,1,12,-2,0,0)
		TNT1 A 0 A_AlertMonsters
        TNT1 A 0 A_Light2
		DCAN I 1 BRIGHT A_WeaponReady(WRF_NOSECONDARY|WRF_NOPRIMARY|WRF_NOSWITCH)
        TNT1 A 0 A_Light1
	    TNT1 A 0 A_ZoomFactor(0.975,ZOOM_INSTANT)
		DCAN J 1 BRIGHT A_WeaponReady(WRF_NOSECONDARY|WRF_NOPRIMARY|WRF_NOSWITCH)
		TNT1 A 0 A_Light0
		TNT1 A 0 A_ZoomFactor(1.00,ZOOM_INSTANT)
		DCAN E 1 A_WeaponReady(WRF_NOSECONDARY|WRF_NOPRIMARY|WRF_NOSWITCH)
		DCAN EEFFFEEGGHHAA 1 A_WeaponReady(WRF_NOSECONDARY|WRF_NOPRIMARY|WRF_NOSWITCH)
        DCAN A 8 A_WeaponReady(WRF_NOSECONDARY|WRF_NOSWITCH)
		Goto Ready
    }
}

ACTOR DoomBulletPuff : BulletPuff
{
    +NOBLOCKMAP 
    +NOGRAVITY
	-SOLID
    VSpeed 0
    Height 1
    Radius 1
	RenderStyle Add
	Alpha 1
    Scale 0.5
	States
	{
    Spawn:
	Crash:	
		TNT1 A 0
		TNT1 A 0 A_PlaySound("bullet/puff")
		TNT1 AAAAA 0 A_SpawnItemEx("BulletSpark",0,0,0,random(-300,300)/100.00,random(-300,300)/100.00,random(200,1000)/100.00,random(-180,180),32,32)
		TNT1 AAAAAA 0 A_SpawnItemEx("BulletSmokeSmall",0,0,0,random(-200,200)/100.00,random(-200,200)/100.00,random(100,300)/100.00,0,32,64)
		TNT1 AAA 0 A_SpawnItemEx("BulletSmoke",0,0,0,random(-200,200)/100.00,random(-200,200)/100.00,random(100,250)/100.00,0,32,64)
        TNT1 AAAA 0 A_SpawnItemEx("BulletPuff1",0,0,0,random(-250,250)/100.00,random(-250,250)/100.00,random(-250,250)/100.00,random(-180,180),32,0)
        TNT1 AAAA 0 A_SpawnItemEx("BulletPuff2",0,0,0,random(-250,250)/100.00,random(-250,250)/100.00,random(-250,250)/100.00,random(-180,180),32,0)
        TNT1 AAAA 0 A_SpawnItemEx("BulletPuff3",0,0,0,random(-250,250)/100.00,random(-250,250)/100.00,random(-250,250)/100.00,random(-180,180),32,0)
        TNT1 AA 0 A_SpawnItemEx("BulletPuff4",0,0,0,random(-250,250)/100.00,random(-250,250)/100.00,random(-250,250)/100.00,random(-180,180),32,0)
		PUFF A 4 BRIGHT
        PUFF AAAAAAAAAAAAAAAAAAAA 2 BRIGHT A_FadeOut(0.05)
		stop
	}
}

ACTOR BulletSpark
{
	Radius 1
	Height 1
	Speed 0.1
	RenderStyle Translucent
	Alpha 0.95
	Mass 2
	Scale 0.2
    BounceCount 6
    BounceFactor 0.45
	PROJECTILE
	+DOOMBOUNCE
	+FLOORCLIP
	-NOGRAVITY
	+DONTSPLASH
	+NOTELEPORT
	-SOLID
	+CLIENTSIDEONLY
	States
	{
    Spawn:
        TNT1 A 0
        TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(594,0,0,0) == 1,"Nope")
		PUFF A 1 BRIGHT
		loop
    Death:
        TNT1 A 0
		PUFF AAAAAAAAAA 2 BRIGHT A_FadeOut(0.1)
        stop
    Nope:
        TNT1 A 0
        stop
	}
}

ACTOR BulletSmoke
{
	Radius 1
	Height 1
	Speed 0.1
    VSpeed 2
	RenderStyle Translucent
	Alpha 0.95
	Scale 0.35
	PROJECTILE
	+NOGRAVITY
	+DONTSPLASH
	+NOTELEPORT
	-SOLID
	+CLIENTSIDEONLY
	States
	{
    Spawn:
        TNT1 A 0
        TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(594,0,0,0) == 1,"Nope")
        PUFF B 1
        PUFF C 1
    Spawn3:
        PUFF D 5
        TNT1 A 0 A_Jump(128,"Spawn3")
		PUFF DDDDDDDDDD 2 A_FadeOut(0.1)
        stop
    Nope:
        TNT1 A 0
        stop
	}
}

ACTOR BulletSmokeSmall : BulletSmoke { Scale 0.15 }

ACTOR BulletPuff1
{
    Radius 1
    Height 1
    RenderStyle Add
    Alpha 0.85
    Scale 0.15
    Speed 2
    Damage 0
    Projectile
    +NOTELEPORT
    +DONTSPLASH
    -SOLID
    +CLIENTSIDEONLY
    States
    {
    Spawn:
        TNT1 A 0
        TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(594,0,0,0) == 1,"Nope")
        PUFF AAABBBCCCDDD 1 BRIGHT A_FadeOut(0.05)
        stop
    Nope:
        TNT1 A 0
        stop
    }
}

ACTOR BulletPuff2 : BulletPuff1
{
    Speed 3
    Scale 0.25
    States
    {
    Spawn:
        TNT1 A 0
        TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(594,0,0,0) == 1,"Nope")
        PUFF AAABBBCCCDDD 1 BRIGHT A_FadeOut(0.05)
        stop
    Nope:
        TNT1 A 0
        stop
    }
}

ACTOR BulletPuff3 : BulletPuff1
{
    Speed 5
    Scale 0.25
    States
    {
    Spawn:
        TNT1 A 0
        TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(594,0,0,0) == 1,"Nope")
        PUFF AAAAAAAA 1 bright A_FadeOut(0.1)
        stop
    Nope:
        TNT1 A 0
        stop
    }
}

ACTOR BulletPuff4 : BulletPuff1
{
    Speed 4
    Scale 0.25
    States
    {
    Spawn:
        TNT1 A 0
        TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(594,0,0,0) == 1,"Nope")
        PUFF AAAAAAAA 1 bright A_FadeOut(0.1)
        stop
    Nope:
        TNT1 A 0
        stop
    }
}